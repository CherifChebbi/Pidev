{% extends 'event.html.twig' %}

{% block title %}Reservation Volume Statistics
{% endblock %}

{% block css %}
	{{ parent() }}
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
{% endblock %}

{% block js %}
	{{ parent() }}
	<script src="https://cdn.jsdelivr.net/npm/chart.js/Chart.min.js"></script>

{% endblock %}

{% block body %}
	<main id="main" class="main">
		<div class="container mt-6">
			<div class="row justify-content-center">
				<div class="col-lg-8 col-md-18 mb-10">
					<div class="card text-center">
						<div class="card-body">
							<h1 class="card-title mb-4">Reservation Statistics</h1>
							<canvas id="reservationsChart" style="height: 300px; width: 100%; margin-bottom: 20px;"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<script>
		var eventTitles = [];
var reservationCounts = [];{% for title, count in reservationData %}eventTitles.push('{{ title|raw }}');
reservationCounts.push({{ count|raw }});{% endfor %}

// Create the bar chart
var ctx = document.getElementById('reservationsChart').getContext('2d');
var reservationsChart = new Chart(ctx, {
type: 'bar',
data: {
labels: eventTitles,
datasets: [
{
label: 'Reservation Counts',
data: reservationCounts,
backgroundColor: 'rgba(255, 99, 132, 0.7)',
borderWidth: 1
}
]
},
options: {
responsive: false,
maintainAspectRatio: false,
legend: {
display: false
},
scales: {
yAxes: [
{
ticks: {
beginAtZero: true
}
}
]
}
}
});
	</script>
{% endblock %}
